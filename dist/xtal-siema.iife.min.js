!function(){const e="disabled";class t{constructor(e){if(this.config=t.mergeSettings(e),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,null===this.selector)throw new Error("Something wrong with your selector ðŸ˜­");this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=t.webkitOrNot(),["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler"].forEach(e=>{this[e]=this[e].bind(this)}),this.init()}static mergeSettings(e){const t={selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,onInit:()=>{},onChange:()=>{}},s=e;for(const e in s)t[e]=s[e];return t}static webkitOrNot(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"}attachEvents(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler))}detachEvents(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler)}init(){this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this)}buildSliderFrame(){const e=this.selectorWidth/this.perPage,t=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length;this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=`${e*t}px`,this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab");const s=document.createDocumentFragment();if(this.config.loop)for(let e=this.innerElements.length-this.perPage;e<this.innerElements.length;e++){const t=this.buildSliderFrameItem(this.innerElements[e].cloneNode(!0));s.appendChild(t)}for(let e=0;e<this.innerElements.length;e++){const t=this.buildSliderFrameItem(this.innerElements[e]);s.appendChild(t)}if(this.config.loop)for(let e=0;e<this.perPage;e++){const t=this.buildSliderFrameItem(this.innerElements[e].cloneNode(!0));s.appendChild(t)}this.sliderFrame.appendChild(s),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),this.slideToCurrent()}buildSliderFrameItem(e){const t=document.createElement("div");return t.style.cssFloat=this.config.rtl?"right":"left",t.style.float=this.config.rtl?"right":"left",t.style.width=`${this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length}%`,t.appendChild(e),t}resolveSlidesNumber(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"==typeof this.config.perPage){this.perPage=1;for(const e in this.config.perPage)window.innerWidth>=e&&(this.perPage=this.config.perPage[e])}}prev(e=1,t){if(this.innerElements.length<=this.perPage)return;const s=this.currentSlide;if(this.config.loop){if(this.currentSlide-e<0){this.disableTransition();const t=this.currentSlide+this.innerElements.length,s=t+this.perPage,i=(this.config.rtl?1:-1)*s*(this.selectorWidth/this.perPage),r=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]=`translate3d(${i+r}px, 0, 0)`,this.currentSlide=t-e}else this.currentSlide=this.currentSlide-e}else this.currentSlide=Math.max(this.currentSlide-e,0);s!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}next(e=1,t){if(this.innerElements.length<=this.perPage)return;const s=this.currentSlide;if(this.config.loop){if(this.currentSlide+e>this.innerElements.length-this.perPage){this.disableTransition();const t=this.currentSlide-this.innerElements.length,s=t+this.perPage,i=(this.config.rtl?1:-1)*s*(this.selectorWidth/this.perPage),r=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]=`translate3d(${i+r}px, 0, 0)`,this.currentSlide=t+e}else this.currentSlide=this.currentSlide+e}else this.currentSlide=Math.min(this.currentSlide+e,this.innerElements.length-this.perPage);s!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}disableTransition(){this.sliderFrame.style.webkitTransition=`all 0ms ${this.config.easing}`,this.sliderFrame.style.transition=`all 0ms ${this.config.easing}`}enableTransition(){this.sliderFrame.style.webkitTransition=`all ${this.config.duration}ms ${this.config.easing}`,this.sliderFrame.style.transition=`all ${this.config.duration}ms ${this.config.easing}`}goTo(e,t){if(this.innerElements.length<=this.perPage)return;const s=this.currentSlide;this.currentSlide=this.config.loop?e%this.innerElements.length:Math.min(Math.max(e,0),this.innerElements.length-this.perPage),s!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),t&&t.call(this))}slideToCurrent(e){const t=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,s=(this.config.rtl?1:-1)*t*(this.selectorWidth/this.perPage);e?requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.enableTransition(),this.sliderFrame.style[this.transformProperty]=`translate3d(${s}px, 0, 0)`})}):this.sliderFrame.style[this.transformProperty]=`translate3d(${s}px, 0, 0)`}updateAfterDrag(){const e=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),t=Math.abs(e),s=this.config.multipleDrag?Math.ceil(t/(this.selectorWidth/this.perPage)):1,i=e>0&&this.currentSlide-s<0,r=e<0&&this.currentSlide+s>this.innerElements.length-this.perPage;e>0&&t>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(s):e<0&&t>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(s),this.slideToCurrent(i||r)}resizeHandler(){this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,this.buildSliderFrame()}clearDrag(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}touchstartHandler(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.touches[0].pageX,this.drag.startY=e.touches[0].pageY)}touchendHandler(e){e.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}touchmoveHandler(e){if(e.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-e.touches[0].pageY)<Math.abs(this.drag.startX-e.touches[0].pageX)),this.pointerDown&&this.drag.letItGo){e.preventDefault(),this.drag.endX=e.touches[0].pageX,this.sliderFrame.style.webkitTransition=`all 0ms ${this.config.easing}`,this.sliderFrame.style.transition=`all 0ms ${this.config.easing}`;const t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),s=this.drag.endX-this.drag.startX,i=this.config.rtl?t+s:t-s;this.sliderFrame.style[this.transformProperty]=`translate3d(${(this.config.rtl?1:-1)*i}px, 0, 0)`}}mousedownHandler(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.preventDefault(),e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.pageX)}mouseupHandler(e){e.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}mousemoveHandler(e){if(e.preventDefault(),this.pointerDown){"A"===e.target.nodeName&&(this.drag.preventClick=!0),this.drag.endX=e.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition=`all 0ms ${this.config.easing}`,this.sliderFrame.style.transition=`all 0ms ${this.config.easing}`;const t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),s=this.drag.endX-this.drag.startX,i=this.config.rtl?t+s:t-s;this.sliderFrame.style[this.transformProperty]=`translate3d(${(this.config.rtl?1:-1)*i}px, 0, 0)`}}mouseleaveHandler(e){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=e.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag())}clickHandler(e){this.drag.preventClick&&e.preventDefault(),this.drag.preventClick=!1}remove(e,t){if(e<0||e>=this.innerElements.length)throw new Error("Item to remove doesn't exist ðŸ˜­");const s=e<this.currentSlide,i=this.currentSlide+this.perPage-1===e;(s||i)&&this.currentSlide--,this.innerElements.splice(e,1),this.buildSliderFrame(),t&&t.call(this)}insert(e,t,s){if(t<0||t>this.innerElements.length+1)throw new Error("Unable to inset it at this index ðŸ˜­");if(-1!==this.innerElements.indexOf(e))throw new Error("The same item in a carousel? Really? Nope ðŸ˜­");const i=t<=this.currentSlide>0&&this.innerElements.length;this.currentSlide=i?this.currentSlide+1:this.currentSlide,this.innerElements.splice(t,0,e),this.buildSliderFrame(),s&&s.call(this)}prepend(e,t){this.insert(e,0),t&&t.call(this)}append(e,t){this.insert(e,this.innerElements.length+1),t&&t.call(this)}destroy(e=!1,t){if(this.detachEvents(),this.selector.style.cursor="auto",e){const e=document.createDocumentFragment();for(let t=0;t<this.innerElements.length;t++)e.appendChild(this.innerElements[t]);this.selector.innerHTML="",this.selector.appendChild(e),this.selector.removeAttribute("style")}t&&t.call(this)}}const s="duration",i="easing",r="per-page",n="start-index",h="undraggable",l="single-drag",a="threshold",o="loop",c="selected",d="attr-for-selected",g="new-selection";class u extends(function(t){return class extends t{constructor(){super(...arguments),this._evCount={}}static get observedAttributes(){return[e]}get disabled(){return this._disabled}set disabled(t){this.attr(e,t,"")}attr(e,t,s){this[(t?"set":"remove")+"Attribute"](e,s||t)}to$(e){const t=e%2;return(e-t)/2+"-"+t}incAttr(e){const t=this._evCount;e in t?t[e]++:t[e]=0,this.attr("data-"+e,this.to$(t[e]))}attributeChangedCallback(t,s,i){switch(t){case e:this._disabled=null!==i}}de(e,t,s){const i=e+(s?"":"-changed"),r=new CustomEvent(i,{detail:t,bubbles:!0,composed:!1});return this.dispatchEvent(r),this.incAttr(i),r}_upgradeProperties(e){e.forEach(e=>{if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this[e]=t}})}}}(HTMLElement)){constructor(){super(...arguments),this._duration=200,this._easing="ease-out",this._perPage=1,this._startIndex=0,this._undraggable=!1,this._singleDrag=!1,this._threshold=20,this._newSelection=-1,this._connected=!1}get SiemaInstance(){return this._siemaInstance}static get is(){return"xtal-siema"}get duration(){return this._duration}set duration(e){this.attr(s,e.toString())}get easing(){return this._easing}set easing(e){this.attr(i,e)}get perPage(){return this._perPage}set perPage(e){this.attr(r,e.toString())}get startIndex(){return this._startIndex}set startIndex(e){this.attr(n,e.toString())}get undraggable(){return this._undraggable}set undraggable(e){this.attr(h,e,"")}get singleDrag(){return this._singleDrag}set singleDrag(e){this.attr(l,e,"")}get threshold(){return this._threshold}set threshold(e){this.attr(a,e.toString())}get loop(){return this._loop}set loop(e){this.attr(o,e,"")}get selected(){return this._selected}set selected(e){this._selected=e,this.de("selected",{value:e}),this.attr(c,e.toString())}get attrForSelected(){return this._attrForSelected}set attrForSelected(e){this.attr(d,e)}get newSelection(){return this._newSelection}set newSelection(e){this.attr(g,e.toString())}static get observedAttributes(){return super.observedAttributes.concat([s,i,r,n,h,l,a,o,d,g])}snakeToCamel(e){return e.replace(/(\-\w)/g,function(e){return e[1].toUpperCase()})}attributeChangedCallback(e,t,c){super.attributeChangedCallback(e,t,c);const u="_"+this.snakeToCamel(e);let m="connectToSiema";switch(e){case r:case s:case n:case a:this[u]=parseFloat(c);break;case i:case d:this[u]=c;break;case h:case l:case o:this[u]=null!==c;break;case g:this[u]=parseFloat(c),m="onNewSelection"}this[m]()}connectToSiema(){if(!this._connected)return;const e=this;this._siemaInstance=new t({selector:this,draggable:!this.undraggable,duration:this.duration,easing:this.easing,loop:this.loop,multipleDrag:!this.singleDrag,perPage:this.perPage,startIndex:this.startIndex,threshold:this.threshold,onChange:function(){e.handleChange()}})}onNewSelection(){this.newSelection<0||this._siemaInstance&&(this._siemaInstance.goTo(this.newSelection),this.invokeResizeHack())}set pageJump(e){const t="number"==typeof e?e:parseInt(e);this.newSelection=this.selected+t}invokeResizeHack(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),this.dispatchEvent(e)}handleChange(){if(!this._siemaInstance)return;const e=this.querySelector("div").childNodes;if(this.attrForSelected&&e&&e.length>this.selected){const t=e[this.selected].firstChild;t&&t.removeAttribute(this.attrForSelected)}if(this.selected=this._siemaInstance.currentSlide,this.attrForSelected&&e&&e.length>this.selected){const t=e[this.selected].firstChild;t&&t.setAttribute(this.attrForSelected,"")}}connectedCallback(){this._upgradeProperties(u.observedAttributes.map(e=>this.snakeToCamel(e)).concat("selected")),this._connected=!0,this.style.display="block",this.selected=0,this.connectToSiema(),setTimeout(()=>{this.invokeResizeHack()},100)}}!function(e){let t=e.is;customElements.get(t)?console.warn("Already registered "+t):customElements.define(t,e)}(u)}();